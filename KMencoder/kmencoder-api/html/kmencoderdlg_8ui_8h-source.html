<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>kmencoderdlg.ui.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>kmencoderdlg.ui.h</h1><div class="fragment"><pre>00001 <font class="comment">/****************************************************************************</font>
00002 <font class="comment">** ui.h extension file, included from the uic-generated form implementation.</font>
00003 <font class="comment">**</font>
00004 <font class="comment">** If you wish to add, delete or rename slots use Qt Designer which will</font>
00005 <font class="comment">** update this file, preserving your code. Create an init() slot in place of</font>
00006 <font class="comment">** a constructor, and a destroy() slot in place of a destructor.</font>
00007 <font class="comment">*****************************************************************************/</font>
00008 
00009 <font class="keywordtype">void</font> kmencoderdlgForm::start()<font class="keyword"></font>
00010 <font class="keyword"></font>{
00011     start_encode = TRUE;
00012     endpos = endpositionCheckBox-&gt;isChecked();
00013     turn.setOutputFileName( otputKURLRequester-&gt;url() );
00014     
00015     prebegin();   
00016 }
00017 
00018 <font class="keywordtype">void</font> kmencoderdlgForm::readFromStdout()<font class="keyword"></font>
00019 <font class="keyword"></font>{
00020     <font class="comment">//Write to the STDOUT TextEdit</font>
00021     outputTextEdit-&gt;append( proc-&gt;readStdout() ); 
00022 }
00023 
00024 
00025 
00026 <font class="keywordtype">void</font> kmencoderdlgForm::manageSourceComboBox()<font class="keyword"></font>
00027 <font class="keyword"></font>{
00028     <font class="keywordflow">if</font>( sourceComboBox-&gt;currentText () == <font class="stringliteral">"Select Source"</font>)
00029     selected = srcSELECT_SOURCE;
00030     <font class="keywordflow">if</font>( sourceComboBox-&gt;currentText () == <font class="stringliteral">"File"</font>)
00031     selected = srcFILE;
00032     <font class="keywordflow">if</font>( sourceComboBox-&gt;currentText () == <font class="stringliteral">"PlayList"</font>)
00033     selected = srcPLAYLIST;
00034     <font class="keywordflow">if</font>( sourceComboBox-&gt;currentText () == <font class="stringliteral">"URL"</font>)
00035     selected = srcURL;
00036     <font class="keywordflow">if</font>( sourceComboBox-&gt;currentText () == <font class="stringliteral">"TV"</font>)
00037     selected = srcTV;
00038     <font class="keywordflow">if</font>( sourceComboBox-&gt;currentText () == <font class="stringliteral">"VCD"</font>)
00039     selected = srcVCD;
00040     <font class="keywordflow">if</font>( sourceComboBox-&gt;currentText () == <font class="stringliteral">"DVD"</font>)
00041     selected = srcDVD;
00042     
00043     kmenselected.setSource( selected );
00044     
00045     <font class="keywordflow">switch</font>( kmenselected.getSource() ) {
00046     <font class="keywordflow">case</font> srcSELECT_SOURCE: {
00047         <font class="keywordflow">break</font>;
00048     }
00049     <font class="keywordflow">case</font> srcFILE: {
00050         turn.setEnabled( <font class="stringliteral">"FILE"</font> );
00051         default_settings();
00052         
00053         getFileGroupStuff();
00054         <font class="keywordflow">break</font>;
00055     }
00056     <font class="keywordflow">case</font> srcPLAYLIST: {
00057         turn.setEnabled( <font class="stringliteral">"PLAYLIST"</font> );
00058         default_settings();
00059         <font class="keywordflow">break</font>;
00060     }
00061     <font class="keywordflow">case</font> srcURL: {
00062         turn.setEnabled( <font class="stringliteral">"URL"</font> );
00063         default_settings();
00064         <font class="keywordflow">break</font>;
00065     }
00066     <font class="keywordflow">case</font> srcTV: {
00067         turn.setEnabled( <font class="stringliteral">"TV"</font> );
00068         default_settings();    
00069         <font class="keywordflow">break</font>;
00070     }
00071     <font class="keywordflow">case</font> srcVCD: {
00072         turn.setEnabled( <font class="stringliteral">"VCD"</font> );
00073         default_settings();
00074         
00075         vcd_scan();
00076         <font class="keywordflow">break</font>;
00077     }
00078     <font class="keywordflow">case</font> srcDVD: {
00079         turn.setEnabled( <font class="stringliteral">"DVD"</font> );
00080         default_settings();
00081          
00082         <font class="comment">//Clear the DVD info combo boxes</font>
00083         achannelComboBox-&gt;clear();
00084         subtitleComboBox-&gt;clear();
00085 
00086         dvd_scan();
00087         <font class="keywordflow">break</font>;
00088     }
00089     <font class="keywordflow">default</font>: {
00090         default_settings();
00091         <font class="keywordflow">break</font>;
00092     }
00093     }
00094   
00095     setgroups();
00096     
00097 }
00098 
00099 
00100 <font class="keywordtype">void</font> kmencoderdlgForm::helpkPushButton()<font class="keyword"></font>
00101 <font class="keyword"></font>{
00102 helpMenu = <font class="keyword">new</font> KHelpMenu(<font class="keyword">this</font>, KGlobal::instance()-&gt;aboutData(), <font class="keyword">false</font>);
00103 
00104 HelpKPushButton-&gt;setAutoRepeat( FALSE );
00105 HelpKPushButton-&gt;setPopup(helpMenu-&gt;menu());
00106 }
00107 
00108 
00109 <font class="keywordtype">void</font> kmencoderdlgForm::default_settings()<font class="keyword"></font>
00110 <font class="keyword"></font>{
00111     <font class="comment">// proc_not_loaded = TRUE;</font>
00112     
00113     <font class="comment">//Set the Default Disabled CheckBoxes.</font>
00114     setendpositiongroup( FALSE );
00115     
00116     <font class="comment">//Set the DEFAULT Disabled GroupBoxes.</font>
00117     setdvdgroup( FALSE );
00118     setfilegroup( FALSE ); 
00119     setplaylistgroup( FALSE );
00120     seturlgroup( FALSE ); 
00121     setvcdgroup( FALSE );
00122     settvgroup( FALSE ); 
00123     setvideogroup( FALSE );
00124     lamemp3GroupBox-&gt;setEnabled( FALSE ); 
00125 
00126     <font class="comment">//Set the Default data values.</font>
00127     cacheSpinBox-&gt;setValue( (miscinfo.getMiscCache()).toInt() ); 
00128     divx4qualitySpinBox-&gt;setValue( 5 );
00129     videobitrateSpinBox-&gt;setValue( 800 );
00130     lameSpinBox-&gt;setValue( 128 );
00131     lamecompresratioSpinBox-&gt;setValue( 1 );
00132     endpositionmegaSpinBox-&gt;setValue( 650 );
00133     endpositionhourSpinBox-&gt;setValue( 0 );
00134     endpositionminutesSpinBox-&gt;setValue( 0 );
00135     endpositionsecondsSpinBox-&gt;setValue( 0 );
00136         
00137     <font class="comment">//Set the Default Checked CheckBoxes.</font>
00138     noskipCheckBox-&gt;setChecked( FALSE );
00139     verboseCheckBox-&gt;setChecked( FALSE );
00140     nosoundCheckBox-&gt;setChecked( FALSE );
00141     lavchighqualityCheckBox-&gt;setChecked( FALSE );
00142     
00143     <font class="comment">//Set the Default ComboBox item.</font>
00144     videosizeComboBox-&gt;setCurrentItem( 0 );
00145     aspectComboBox-&gt;setCurrentText( videoinfo.getVideoAspectMode() );
00146     vqualityComboBox-&gt;setCurrentItem( 0 );
00147     audioqualityComboBox-&gt;setCurrentItem( 0 );
00148     bitrateComboBox-&gt;setCurrentItem( 0 );
00149     amodeComboBox-&gt;setCurrentItem( 0 );
00150     endpositionComboBox-&gt;setCurrentItem( 0 );
00151     lavccodecComboBox-&gt;setCurrentItem( 0 );
00152     
00153     <font class="comment">//Set the Default Slider position.</font>
00154     subtitlepositionSlider-&gt;setValue( 0 );
00155     volumeSlider-&gt;setValue( 0 );
00156     
00157     <font class="comment">//Set Combo Box Defaults.</font>
00158     manageEnableControls();
00159     
00160     manageVideoSizeComboBox(); 
00161     manageWidthChanged();
00162     manageDivx4CodecChanged();
00163     manageLavcCodecChanged();
00164     
00165     manageAudioQualityCombobox();
00166     manageMp3Changed();
00167     
00168     manageEndPositionComboBox();
00169     manageMiscChanged();
00170     
00171     <font class="comment">//manageSelectAudioChannel();</font>
00172     <font class="comment">//manageSubTitlesComboBox();</font>
00173     <font class="comment">//manageTitleChanged();</font>
00174     
00175     manageSoundOnCheckBox();
00176     
00177     manageDVDChanged();
00178     manageCdromChanged();
00179 }
00180 
00181 
00182 <font class="keywordtype">void</font> kmencoderdlgForm::dvd_scan()<font class="keyword"></font>
00183 <font class="keyword"></font>{
00184     new_proc();
00185     
00186     QString home_env = getenv( <font class="stringliteral">"HOME"</font> );
00187     home_env = home_env + <font class="stringliteral">"/.kmencoder"</font>;
00188     
00189     <font class="keywordflow">if</font>( access( home_env, R_OK | W_OK | X_OK | F_OK ) != 0 ){
00190     <font class="keywordflow">if</font>( mkdir( home_env,  S_IRWXU ) != 0 ) {
00191         QMessageBox::critical( 0, <font class="stringliteral">"Error"</font>, <font class="stringliteral">"Error with config directory!"</font> );
00192         <font class="keywordflow">return</font>;
00193     }
00194     }
00195     home_env = home_env + <font class="stringliteral">"/tmp"</font>;
00196     <font class="keywordflow">if</font>( access( home_env, R_OK | W_OK | X_OK | F_OK ) != 0 ) {
00197     <font class="keywordflow">if</font>( mkdir( home_env,  S_IRWXU ) != 0 ) {
00198         QMessageBox::critical( 0, <font class="stringliteral">"Error"</font>, <font class="stringliteral">"Error with tmp directory!"</font> );
00199         <font class="keywordflow">return</font>;
00200     }
00201     }
00202     home_env = home_env + <font class="stringliteral">"/kmencoder_test.avi"</font>;
00203     
00204     proc-&gt;addArgument( <font class="stringliteral">"mencoder"</font> );
00205     proc-&gt;addArgument( <font class="stringliteral">"-dvd-device"</font> );
00206     proc-&gt;addArgument( dvdinfo.getDVDDevice() );
00207     proc-&gt;addArgument( <font class="stringliteral">"-dvd"</font> );
00208     proc-&gt;addArgument( <font class="stringliteral">"1"</font> ) ;
00209     proc-&gt;addArgument( <font class="stringliteral">"-v"</font> );
00210     proc-&gt;addArgument( <font class="stringliteral">"-o"</font> );
00211     proc-&gt;addArgument( home_env );
00212 
00213     proc-&gt;setCommunication ( 0x04 );
00214 
00215     connect( proc, SIGNAL(readyReadStderr()),
00216          <font class="keyword">this</font>, SLOT(getDVDInfo() ));    
00217 
00218     <font class="comment">//Sart the process.</font>
00219     <font class="keywordflow">if</font> ( !proc-&gt;start() ) {
00220     <font class="comment">// error handling</font>
00221     QMessageBox::critical( 0,
00222                    <font class="stringliteral">"Error"</font>,
00223                    <font class="stringliteral">"Could not scan the DVD!"</font> );
00224     } 
00225 }
00226 
00227 
00228 <font class="keywordtype">void</font> kmencoderdlgForm::manageVideoSizeComboBox()<font class="keyword"></font>
00229 <font class="keyword"></font>{
00230     <font class="keywordflow">if</font>(videosizeComboBox-&gt;currentText () == <font class="stringliteral">"Auto"</font>)
00231     vselected = videoAUTO;
00232     <font class="keywordflow">if</font>(videosizeComboBox-&gt;currentText () == <font class="stringliteral">"Aspect"</font>)
00233     vselected = videoASPECT;
00234     <font class="keywordflow">if</font>(videosizeComboBox-&gt;currentText () == <font class="stringliteral">"Width/Auto Height"</font>)
00235     vselected = videoWIDTH;
00236     <font class="keywordflow">if</font>(videosizeComboBox-&gt;currentText () == <font class="stringliteral">"Width/Height"</font>)
00237     vselected = videoWIDTHHEIGHT;
00238     
00239     kmenselected.setVideo( vselected );
00240     
00241     <font class="keywordflow">switch</font>( vselected ) {
00242     <font class="keywordflow">case</font> videoAUTO: {
00243         aspectComboBox-&gt;setEnabled( FALSE );
00244         widthheightGroupBox-&gt;setEnabled( FALSE );
00245         videosizeDefaults();
00246         <font class="keywordflow">break</font>;
00247     }
00248     <font class="keywordflow">case</font> videoASPECT: {
00249         widthheightGroupBox-&gt;setEnabled( FALSE );
00250         aspectComboBox-&gt;setEnabled( TRUE );
00251         videosizeDefaults();
00252         <font class="keywordflow">break</font>;
00253     }
00254     <font class="keywordflow">case</font> videoWIDTH: {
00255         aspectComboBox-&gt;setEnabled( FALSE ); 
00256         widthheightGroupBox-&gt;setEnabled( TRUE );
00257         widthSpinBox-&gt;setEnabled( TRUE );
00258         heightSpinBox-&gt;setEnabled( FALSE ); 
00259         videosizeDefaults();
00260         <font class="keywordflow">break</font>;
00261     }
00262     <font class="keywordflow">case</font> videoWIDTHHEIGHT: {
00263         aspectComboBox-&gt;setEnabled( FALSE ); 
00264         widthheightGroupBox-&gt;setEnabled( TRUE );
00265         widthSpinBox-&gt;setEnabled( TRUE );
00266         heightSpinBox-&gt;setEnabled( TRUE ); 
00267         videosizeDefaults();
00268         <font class="keywordflow">break</font>;
00269     }
00270     <font class="keywordflow">default</font>: <font class="keywordflow">break</font>;
00271     }    
00272     manageWidthChanged();
00273     
00274 }
00275 
00276 
00277 <font class="keywordtype">void</font> kmencoderdlgForm::videosizeDefaults()<font class="keyword"></font>
00278 <font class="keyword"></font>{
00279     widthSpinBox-&gt;setValue( ( videoinfo.getVideoWidth() ).toInt() );
00280     heightSpinBox-&gt;setValue( ( videoinfo.getVideoHeight() ).toInt() );
00281 }
00282 
00283 
00284 <font class="keywordtype">void</font> kmencoderdlgForm::videoQualityOutput()<font class="keyword"></font>
00285 <font class="keyword"></font>{
00286     <font class="keywordflow">if</font>(vqualityComboBox-&gt;currentText () == <font class="stringliteral">"Exact Copy"</font>)
00287     vqselected = vqEXACTCOPY;
00288     <font class="keywordflow">if</font>(vqualityComboBox-&gt;currentText () == <font class="stringliteral">"DivX 4"</font>)
00289     vqselected = vqDIVX4;
00290     <font class="keywordflow">if</font>(vqualityComboBox-&gt;currentText () == <font class="stringliteral">"lavc"</font>)
00291     vqselected = vqLAVC;
00292     
00293     kmenselected.setVideoQuality( vqselected );
00294     
00295     <font class="keywordflow">switch</font>( vqselected ){
00296     <font class="keywordflow">case</font> vqEXACTCOPY: {
00297         videobitrateSpinBox-&gt;setEnabled( FALSE ); 
00298         divx4GroupBox-&gt;setEnabled( FALSE ); 
00299         lavcGroupBox-&gt;setEnabled( FALSE ); 
00300         aspectComboBox-&gt;setEnabled( FALSE );
00301         widthheightGroupBox-&gt;setEnabled( FALSE );
00302         videosizeComboBox-&gt;setEnabled( FALSE );
00303         videosizeComboBox-&gt;setCurrentItem( 0 );
00304 <font class="comment">//      videosizeDefaults();</font>
00305         <font class="keywordflow">break</font>;
00306     }
00307     <font class="keywordflow">case</font> vqDIVX4: {
00308         manageDivx4CodecChanged();
00309         
00310         videosizeComboBox-&gt;setEnabled( TRUE ); 
00311         lavcGroupBox-&gt;setEnabled( FALSE ); 
00312         divx4GroupBox-&gt;setEnabled( TRUE ); 
00313         videobitrateSpinBox-&gt;setEnabled( TRUE );  
00314         <font class="keywordflow">break</font>;
00315     }
00316     <font class="keywordflow">case</font> vqLAVC: {
00317         manageLavcCodecChanged();
00318         
00319         videosizeComboBox-&gt;setEnabled( TRUE ); 
00320         lavcGroupBox-&gt;setEnabled( TRUE ); 
00321         divx4GroupBox-&gt;setEnabled( FALSE ); 
00322         videobitrateSpinBox-&gt;setEnabled( TRUE );  
00323         <font class="keywordflow">break</font>;
00324     }
00325     <font class="keywordflow">default</font>: <font class="keywordflow">break</font>;
00326     }   
00327 }
00328 
00329 
00330 <font class="keywordtype">void</font> kmencoderdlgForm::manageAudioQualityCombobox()<font class="keyword"></font>
00331 <font class="keyword"></font>{
00332     <font class="keywordflow">if</font>(audioqualityComboBox-&gt;currentText () == <font class="stringliteral">"Exact Copy"</font>)
00333     aqselected = aqEXACTCOPY;
00334     <font class="keywordflow">if</font>(audioqualityComboBox-&gt;currentText () == <font class="stringliteral">"MP3"</font>)
00335     aqselected = aqMP3;
00336     
00337     kmenselected.setAudioQuality( aqselected );
00338     
00339     <font class="keywordflow">switch</font>( aqselected ){
00340     <font class="keywordflow">case</font> aqEXACTCOPY: {
00341         lamemp3GroupBox-&gt;setEnabled( FALSE ); 
00342         <font class="keywordflow">break</font>;
00343     }
00344     <font class="keywordflow">case</font> aqMP3: {
00345         manageMp3Changed();
00346         
00347         lamemp3GroupBox-&gt;setEnabled( TRUE );        
00348         bitrateComboBox-&gt;setEnabled( TRUE ); 
00349         lameSpinBox-&gt;setEnabled( TRUE ); 
00350         amodeComboBox-&gt;setEnabled( TRUE ); 
00351         lamecompresratioSpinBox-&gt;setEnabled( TRUE ); 
00352         volumeSlider-&gt;setEnabled( TRUE ); 
00353         <font class="keywordflow">break</font>;
00354     }
00355     <font class="keywordflow">default</font>: <font class="keywordflow">break</font>;
00356     }   
00357 }
00358 
00359 
00360 <font class="keywordtype">void</font> kmencoderdlgForm::manageEndPositionComboBox()<font class="keyword"></font>
00361 <font class="keyword"></font>{
00362    <font class="comment">// manageMiscChanged();</font>
00363     <font class="keywordflow">if</font>(endpositionComboBox-&gt;currentText () == <font class="stringliteral">"Mega Bytes"</font>)
00364     epselected = epMEGABYTES;
00365     <font class="keywordflow">if</font>(endpositionComboBox-&gt;currentText () == <font class="stringliteral">"Time"</font>)
00366     epselected = epTIME;
00367     
00368     kmenselected.setEndPos( epselected );
00369     
00370     <font class="keywordflow">switch</font>( epselected ){
00371     <font class="keywordflow">case</font> epMEGABYTES: {
00372         endpositionmegaSpinBox-&gt;setEnabled( TRUE ); 
00373         endpositionhourSpinBox-&gt;setEnabled( FALSE ); 
00374         endpositionminutesSpinBox-&gt;setEnabled( FALSE ); 
00375         endpositionsecondsSpinBox-&gt;setEnabled( FALSE ); 
00376         <font class="keywordflow">break</font>;
00377     }
00378     <font class="keywordflow">case</font> epTIME: {
00379         endpositionmegaSpinBox-&gt;setEnabled( FALSE ); 
00380         endpositionhourSpinBox-&gt;setEnabled( TRUE ); 
00381         endpositionminutesSpinBox-&gt;setEnabled( TRUE ); 
00382         endpositionsecondsSpinBox-&gt;setEnabled( TRUE );      
00383         <font class="keywordflow">break</font>;
00384     }
00385     <font class="keywordflow">default</font>: <font class="keywordflow">break</font>;
00386     }
00387 }
00388 
00389 
00390 <font class="keywordtype">void</font> kmencoderdlgForm::setdvdgroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00391 <font class="keyword"></font>{
00392     dvdGroupBox-&gt;setEnabled( set_it );  
00393     dvdvideoGroupBox-&gt;setEnabled( set_it ); 
00394     dvdaudioGroupBox-&gt;setEnabled( set_it ); 
00395     dvdtittleSpinBox-&gt;setEnabled( set_it ); 
00396     dvdangleSpinBox-&gt;setEnabled( set_it ); 
00397     dvd1stchapterSpinBox-&gt;setEnabled( set_it );
00398     dvdlastchapterSpinBox-&gt;setEnabled( set_it );
00399     enablesubCheckBox-&gt;setEnabled( set_it );
00400     enablesubCheckBox-&gt;setChecked( FALSE );
00401     subtitleComboBox-&gt;setDisabled( set_it ); 
00402     subtitlepositionSlider-&gt;setEnabled( set_it ); 
00403     achannelComboBox-&gt;setEnabled( set_it );
00404     audiolanguageLineEdit-&gt;setEnabled( set_it );
00405     audioformatLineEdit-&gt;setEnabled( set_it );
00406     dvddeviceKURLRequester-&gt;setEnabled( TRUE );
00407         
00408     dvdtittleSpinBox-&gt;setValue( (dvdinfo.getDVDTitle_selected() ).toInt() );
00409     dvdangleSpinBox-&gt;setValue( (dvdinfo.getDVDAngle_selected() ).toInt() ); 
00410     dvd1stchapterSpinBox-&gt;setValue( (dvdinfo.getDVD1stChapter() ).toInt() ); 
00411     dvdlastchapterSpinBox-&gt;setValue( (dvdinfo.getDVDLastChapter() ).toInt() );
00412     
00413     dvddeviceKURLRequester-&gt;setURL( dvdinfo.getDVDDevice() );
00414 }
00415 
00416 
00417 <font class="keywordtype">void</font> kmencoderdlgForm::setendpositiongroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00418 <font class="keyword"></font>{
00419     endpositionCheckBox-&gt;setEnabled( set_it  );
00420    <font class="comment">// endpositionComboBox-&gt;setEnabled( set_it  );    </font>
00421    <font class="comment">// endpositionGroupBox-&gt;setEnabled( set_it  );</font>
00422     endpositionCheckBox-&gt;setChecked( FALSE );
00423 }
00424 
00425 
00426 <font class="keywordtype">void</font> kmencoderdlgForm::setfilegroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00427 <font class="keyword"></font>{
00428     fileGroupBox-&gt;setEnabled( set_it ); 
00429     fileKURLRequester-&gt;setEnabled( set_it );
00430 }
00431 
00432 
00433 <font class="keywordtype">void</font> kmencoderdlgForm::setplaylistgroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00434 <font class="keyword"></font>{
00435     playlistGroupBox-&gt;setEnabled( set_it );
00436 }
00437 
00438 
00439 <font class="keywordtype">void</font> kmencoderdlgForm::seturlgroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00440 <font class="keyword"></font>{
00441     urlGroupBox-&gt;setEnabled( set_it ); 
00442     urlKURLRequester-&gt;setEnabled( set_it );    
00443 }
00444 
00445 
00446 <font class="keywordtype">void</font> kmencoderdlgForm::setvcdgroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00447 <font class="keyword"></font>{
00448     vcdGroupBox-&gt;setEnabled( set_it );
00449     vcdtrackSpinBox-&gt;setEnabled( set_it );
00450     cdromdeviceKURLRequester-&gt;setEnabled( TRUE );
00451     
00452     cdromdeviceKURLRequester-&gt;setURL( vcdinfo.getVCDDevice() );
00453 }
00454 
00455 
00456 <font class="keywordtype">void</font> kmencoderdlgForm::settvgroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00457 <font class="keyword"></font>{
00458     tvGroupBox-&gt;setEnabled( set_it ); 
00459 }
00460 
00461 
00462 <font class="keywordtype">void</font> kmencoderdlgForm::setvideogroup( <font class="keywordtype">bool</font> set_it )<font class="keyword"></font>
00463 <font class="keyword"></font>{
00464     videosizeComboBox-&gt;setEnabled( set_it );
00465     widthheightGroupBox-&gt;setEnabled( set_it );
00466     divx4GroupBox-&gt;setEnabled( set_it ); 
00467     lavcGroupBox-&gt;setEnabled( set_it ); 
00468     videosizeDefaults(); 
00469 }
00470 
00471 
00472 <font class="keywordtype">void</font> kmencoderdlgForm::readFromStderr()<font class="keyword"></font>
00473 <font class="keyword"></font>{
00474     <font class="comment">//Write to the STDERR TextEdit</font>
00475     stderrTextEdit-&gt;append( proc-&gt;readStderr() ); 
00476 }
00477 
00478 <font class="keywordtype">void</font> kmencoderdlgForm::getDVDInfo()<font class="keyword"></font>
00479 <font class="keyword"></font>{
00480     <font class="comment">//GET Important Info of the DVD.  Titles, chapters, angles, audio channels, subtitles.</font>
00481     uint i = 0;
00482     uint j = 0;
00483     uint audio = 0;
00484     uint subt = 0;
00485 
00486     KStringHandler catched;
00487     QString catched2 = <font class="stringliteral">"Start"</font>;
00488     QString catched3 = proc-&gt;readStderr();
00489     QString output_text = catched3.simplifyWhiteSpace();
00490 
00491     <font class="comment">//Start Searching for mencoder output for info.</font>
00492     <font class="keywordflow">while</font>( output_text.length() &gt; i ) {
00493     catched2 = catched.word( output_text , i);
00494     
00495     <font class="keywordflow">if</font> (  catched2 == <font class="stringliteral">"There"</font> &amp;&amp; catched.word(output_text, i + 3) == <font class="stringliteral">"titles"</font> )
00496         dvdinfo.setTitles( catched.word(output_text, i + 2) );
00497     
00498     <font class="keywordflow">if</font> (  catched2 == <font class="stringliteral">"There"</font> &amp;&amp; catched.word(output_text, i + 3) == <font class="stringliteral">"chapters"</font> )
00499         dvdinfo.setChapters( catched.word(output_text, i + 2) );
00500     
00501     <font class="keywordflow">if</font> (  catched2 == <font class="stringliteral">"There"</font> &amp;&amp; catched.word(output_text, i + 3) == <font class="stringliteral">"angles"</font> )
00502         dvdinfo.setAngles( catched.word(output_text, i + 2) );
00503     
00504     <font class="keywordflow">if</font> (  catched2 == <font class="stringliteral">"aid:"</font> ) {
00505         dvdAinfo[audio].setChannel( catched.word(output_text, i + 1) );
00506         dvdAinfo[audio].setLanguage( catched.word(output_text, i - 1) );
00507         dvdAinfo[audio].setFormat( catched.word(output_text, i - 3) );
00508         dvdAinfo[audio].setIndex( audio );
00509         audio++;
00510     }
00511     
00512     <font class="keywordflow">if</font>( catched2 == <font class="stringliteral">"sid"</font> ) {
00513         dvdSinfo[ subt ].setID( catched.word(output_text, i + 2) );
00514         dvdSinfo[ subt ].setLanguage( catched.word(output_text, i + 4) );
00515         dvdSinfo[ subt ].setIndex( subt );
00516         subt++;
00517     } 
00518     i++;
00519     }
00520     
00521     <font class="comment">//set info limits.</font>
00522     dvdtittleSpinBox-&gt;setMaxValue( dvdinfo.getTitles() ); 
00523     dvdangleSpinBox-&gt;setMaxValue( dvdinfo.getAngles() ); 
00524     dvd1stchapterSpinBox-&gt;setMaxValue( dvdinfo.getChapters() ); 
00525     dvdlastchapterSpinBox-&gt;setMaxValue( dvdinfo.getChapters() ); 
00526     
00527     <font class="keywordflow">for</font>( j = 0; j &lt; audio; j++)
00528     achannelComboBox-&gt;insertItem( dvdAinfo[j].getChannel() , dvdAinfo[j].getIndex() );
00529     <font class="keywordflow">if</font>(audio != 0)
00530     manageSelectAudioChannel();
00531     
00532     <font class="keywordflow">for</font>(j = 0; j &lt; subt; j++)
00533     subtitleComboBox-&gt;insertItem( dvdSinfo[j].getID(), dvdSinfo[j].getIndex() ); 
00534     <font class="keywordflow">if</font>(subt != 0)
00535     manageSubTitlesComboBox();
00536 }
00537 
00538 
00539 <font class="keywordtype">void</font> kmencoderdlgForm::manageSelectAudioChannel()<font class="keyword"></font>
00540 <font class="keyword"></font>{
00541     <font class="keywordtype">bool</font> select = FALSE;
00542     uint i = 0;
00543     
00544     <font class="keywordflow">while</font>( !select ){
00545     <font class="keywordflow">if</font>( achannelComboBox-&gt;currentText () == dvdAinfo[i].getChannel() ) {
00546         dvdinfo.setDVDAudioChannel( achannelComboBox-&gt;currentText () );
00547         audiolanguageLineEdit-&gt;setText( dvdAinfo[i].getLanguage() );
00548         audioformatLineEdit-&gt;setText( dvdAinfo[i].getFormat() );    
00549         select = TRUE;  
00550     }
00551     i++;
00552     }
00553 }
00554 
00555 
00556 <font class="keywordtype">void</font> kmencoderdlgForm::stop()<font class="keyword"></font>
00557 <font class="keyword"></font>{
00558     <font class="keywordflow">if</font>( proc_not_loaded == FALSE ) {
00559     <font class="keywordflow">if</font>( proc-&gt;isRunning() == TRUE ){
00560         proc-&gt;tryTerminate();
00561         QTimer::singleShot( 5000, proc, SLOT( kill() ) );
00562         <font class="keyword">delete</font> proc;
00563         proc_not_loaded = TRUE;
00564     }
00565     <font class="keywordflow">else</font> {
00566         <font class="keyword">delete</font> proc;
00567         proc_not_loaded = TRUE;
00568     }
00569     }
00570 }
00571 
00572 
00573 <font class="keywordtype">void</font> kmencoderdlgForm::manageSubTitlesComboBox()<font class="keyword"></font>
00574 <font class="keyword"></font>{
00575     <font class="keywordtype">bool</font> select = FALSE;
00576     uint i = 0;
00577 
00578     <font class="keywordflow">while</font>( !select ){
00579     <font class="keywordflow">if</font>( subtitleComboBox-&gt;currentText () == dvdSinfo[i].getID() ) {
00580         dvdinfo.setDVDSubTitle( subtitleComboBox-&gt;currentText () );     
00581         subposLineEdit-&gt;setText( dvdSinfo[i].getLanguage() );
00582         select = TRUE;  
00583     }
00584     i++;
00585     }
00586 }
00587 
00588 
00589 <font class="keywordtype">void</font> kmencoderdlgForm::manageWidthChanged()<font class="keyword"></font>
00590 <font class="keyword"></font>{
00591     videoinfo.setVideoWidth( widthSpinBox-&gt;text() );
00592     videoinfo.setVideoHeight( heightSpinBox-&gt;text() );
00593     videoinfo.setVideoAspectMode( aspectComboBox-&gt;currentText () );
00594 }
00595     
00596 
00597 <font class="keywordtype">void</font> kmencoderdlgForm::manageTitleChanged()<font class="keyword"></font>
00598 <font class="keyword"></font>{
00599     dvdinfo.setDVDTitle_selected( dvdtittleSpinBox-&gt;text() );
00600     dvdinfo.setDVDAngle_selected( dvdangleSpinBox-&gt;text() );
00601     dvdinfo.setDVDChapter_selected( dvd1stchapterSpinBox-&gt;text(), dvdlastchapterSpinBox-&gt;text() );
00602     dvdinfo.setDVDSubPos( subtitlepositionSlider-&gt;value() );
00603 }
00604 
00605 
00606 <font class="keywordtype">void</font> kmencoderdlgForm::manageLavcCodecChanged()<font class="keyword"></font>
00607 <font class="keyword"></font>{
00608     videoinfo.setVideoLavcOpts( lavccodecComboBox-&gt;currentText (),
00609                 lavchighqualityCheckBox-&gt;isChecked(),
00610                 videobitrateSpinBox-&gt;text() );
00611 }
00612 
00613 
00614 <font class="keywordtype">void</font> kmencoderdlgForm::manageDivx4CodecChanged()<font class="keyword"></font>
00615 <font class="keyword"></font>{
00616     videoinfo.setVideoDivx4Opts( divx4qualitySpinBox-&gt;text(),
00617                  videobitrateSpinBox-&gt;text() );
00618 }
00619 
00620 
00621 <font class="keywordtype">void</font> kmencoderdlgForm::manageMp3Changed()<font class="keyword"></font>
00622 <font class="keyword"></font>{
00623     soundinfo.setSoundLameOpts( bitrateComboBox-&gt;currentText (),
00624                 lameSpinBox-&gt;text(),
00625                 amodeComboBox-&gt;currentText (),
00626                 lamecompresratioSpinBox-&gt;text() ,
00627                 volumeSlider-&gt;value() );
00628 }
00629 
00630 
00631 <font class="keywordtype">void</font> kmencoderdlgForm::manageSoundOnCheckBox()<font class="keyword"></font>
00632 <font class="keyword"></font>{
00633     soundinfo.setSoundON( ! nosoundCheckBox-&gt;isChecked() );
00634 }
00635 
00636 
00637 <font class="keywordtype">void</font> kmencoderdlgForm::manageMiscChanged()<font class="keyword"></font>
00638 <font class="keyword"></font>{
00639     miscinfo.setMiscNoSkip( noskipCheckBox-&gt;isChecked() );
00640     miscinfo.setMiscVerbose(verboseCheckBox-&gt;isChecked()  );
00641     miscinfo.setEndPos_enabled( endpositionCheckBox-&gt;isChecked() );
00642     
00643     miscinfo.setMiscCache( cacheSpinBox-&gt;text() );
00644     miscinfo.setMiscEndPosMega( endpositionmegaSpinBox-&gt;text() );
00645     miscinfo.setMiscEndPosTime( endpositionhourSpinBox-&gt;text(),
00646                 endpositionminutesSpinBox-&gt;text(),
00647                 endpositionsecondsSpinBox-&gt;text() );
00648 }
00649 
00650 
00651 <font class="keywordtype">void</font> kmencoderdlgForm::preview()<font class="keyword"></font>
00652 <font class="keyword"></font>{
00653     start_encode = FALSE;
00654     endpos = FALSE;
00655     prebegin();
00656 }
00657 
00658 
00659 <font class="keywordtype">void</font> kmencoderdlgForm::begin()<font class="keyword"></font>
00660 <font class="keyword"></font>{
00661     new_proc();
00662     proc-&gt;addArgument( turn.getExec() );
00663     <font class="keywordflow">try</font> {
00664     <font class="keywordflow">switch</font>( kmenselected.getSource() ) {
00665         <font class="keywordflow">case</font> srcSELECT_SOURCE: {
00666         <font class="keywordflow">throw</font> KMenNotSet( <font class="stringliteral">"SOURCE"</font> );
00667         <font class="keywordflow">break</font>;
00668         }
00669         <font class="keywordflow">case</font> srcFILE: {
00670         <font class="keywordflow">if</font>( fileinfo.setFileArguments( proc ) != TRUE )
00671             <font class="keywordflow">throw</font> KMenNotSet( <font class="stringliteral">"INput File"</font> );
00672         <font class="keywordflow">break</font>;
00673         }
00674         <font class="keywordflow">case</font> srcPLAYLIST: {
00675         <font class="keywordflow">break</font>;
00676         }
00677         <font class="keywordflow">case</font> srcURL: {
00678         <font class="keywordflow">if</font> ( urlinfo.setURLArguments( proc ) != TRUE )
00679             <font class="keywordflow">throw</font> KMenNotSet( <font class="stringliteral">"URL Address"</font> ) ;
00680         <font class="keywordflow">break</font>;
00681         }
00682         <font class="keywordflow">case</font> srcTV: {
00683         <font class="keywordflow">break</font>;
00684         }
00685         <font class="keywordflow">case</font> srcVCD: {
00686         vcdinfo.setVCDArguments( proc );
00687         <font class="keywordflow">break</font>;
00688         }
00689         <font class="keywordflow">case</font> srcDVD: {
00690         dvdinfo.setDVDArguments( nosoundCheckBox-&gt;isChecked(),
00691                      enablesubCheckBox-&gt;isChecked(), proc );
00692         <font class="keywordflow">break</font>;
00693         }
00694         <font class="keywordflow">default</font>: {
00695         <font class="keywordflow">break</font>;
00696         }
00697     }
00698     
00699     miscinfo.setMiscArguments( proc );
00700     
00701     videoinfo.setVideoArguments( proc, kmenselected );  
00702     
00703     soundinfo.setSoundArguments( proc, kmenselected );
00704     
00705     <font class="keywordflow">if</font>( start_encode == TRUE ) {
00706         <font class="keywordflow">if</font>( turn.setOutputFileArguments( proc ) != TRUE )
00707         <font class="keywordflow">throw</font> KMenNotSet( <font class="stringliteral">"OUTput File"</font> );
00708         proc-&gt;setCommunication( 0x02 <font class="comment">/* | 0x04 */</font> | 0x08  );
00709         
00710         <font class="comment">//Get Stdout info.</font>
00711         connect( proc, SIGNAL(readyReadStdout()),
00712              <font class="keyword">this</font>, SLOT( manageProgressBar( )) );
00713         
00714         connect( proc, SIGNAL( processExited() ),
00715              <font class="keyword">this</font>, SLOT( manageListBoxDone() ) ); 
00716     }
00717     <font class="keywordflow">else</font> {    
00718         <font class="keywordflow">if</font>( miscinfo.getMiscVerbose() == TRUE ) {
00719         proc-&gt;setCommunication( 0x02 <font class="comment">/* | 0x04 */</font> | 0x08  );
00720         
00721         connect( proc, SIGNAL(readyReadStdout()),
00722              <font class="keyword">this</font>, SLOT( readFromStdout() ) );
00723         
00724         connect( proc, SIGNAL( processExited() ),
00725              <font class="keyword">this</font>, SLOT( manageEnableControls() ) ); 
00726         }
00727         <font class="keywordflow">else</font> connect( proc, SIGNAL( processExited() ),
00728               <font class="keyword">this</font>, SLOT( manageEnableControls() ) ); 
00729     }
00730     }
00731     
00732     <font class="keywordflow">catch</font> ( <a class="code" href="classKMenError.html">KMenError</a>&amp; theError )
00733     {
00734     stop();
00735     theError.PrintError();
00736     <font class="keywordflow">return</font>;
00737     }
00738     <font class="keywordflow">catch</font> ( ... )
00739     {
00740     stop();
00741     QMessageBox::critical( 0, <font class="stringliteral">"Error"</font>, <font class="stringliteral">"Not Identified Error!"</font> );
00742     <font class="keywordflow">return</font>;
00743     }
00744     
00745     <font class="comment">//doneListBox-&gt;insertStringList( proc-&gt;arguments() );</font>
00746     
00747     <font class="comment">//START process</font>
00748     <font class="keywordflow">if</font> ( !proc-&gt;start() ) {
00749     <font class="comment">// error handling</font>
00750     <font class="keywordflow">if</font>( start_encode == TRUE )
00751     QMessageBox::critical( 0,
00752                    <font class="stringliteral">"Error"</font>,
00753                    <font class="stringliteral">"Can't Begin mencoder!"</font> );
00754     <font class="keywordflow">else</font> QMessageBox::critical( 0,
00755                    <font class="stringliteral">"Error"</font>,
00756                    <font class="stringliteral">"Can't Begin mplayer!"</font> );
00757     }  
00758     <font class="keywordflow">else</font> {
00759     optionsTabWidget-&gt;setEnabled( FALSE );
00760     startPushButton-&gt;setEnabled( FALSE );
00761     previewPushButton-&gt;setEnabled( FALSE );
00762     }  
00763 }
00764 
00765 
00766 <font class="keywordtype">void</font> kmencoderdlgForm::prebegin()<font class="keyword"></font>
00767 <font class="keyword"></font>{
00768         turn.setPreview( start_encode );
00769 
00770         videoinfo.setVideoEncode_enabled( start_encode );
00771         soundinfo.setSoundEncode_enabled( start_encode );
00772         
00773         miscinfo.setEndPos_enabled( endpos );
00774         videoinfo.setVideoEncode_enabled( start_encode );
00775         
00776         begin();
00777         
00778         manageMiscChanged();
00779 }
00780 
00781 
00782 <font class="keywordtype">void</font> kmencoderdlgForm::manageDVDChanged()<font class="keyword"></font>
00783 <font class="keyword"></font>{
00784     dvdinfo.setDVDDevice( dvddeviceKURLRequester-&gt;url() );
00785 }
00786 
00787 
00788 <font class="keywordtype">void</font> kmencoderdlgForm::manageListBoxDone()<font class="keyword"></font>
00789 <font class="keyword"></font>{
00790     doneListBox-&gt;insertItem( otputKURLRequester-&gt;url(), 0 ) ;
00791     encodingProgressBar-&gt;reset();
00792     <font class="comment">//encodingProgressBar-&gt;setProgress( 0 );</font>
00793     progress_on = FALSE;
00794     manageEnableControls();
00795 }
00796 
00797 
00798 <font class="keywordtype">void</font> kmencoderdlgForm::manageProgressBar()<font class="keyword"></font>
00799 <font class="keyword"></font>{
00800     QString catched = proc-&gt;readStdout(); 
00801     QString output_text = catched.simplifyWhiteSpace();
00802    ushort indx = output_text.find( <font class="charliteral">'%'</font>, 0, TRUE);
00803     catched = output_text.mid( indx - 2, 2 );
00804     indx = catched.toInt();
00805     <font class="keywordflow">if</font>( indx &gt; 99) indx = 100;
00806     <font class="keywordflow">if</font>( indx &lt;= 100 &amp;&amp; indx &gt; encodingProgressBar-&gt;progress()  || progress_on == FALSE )
00807     encodingProgressBar-&gt;setProgress( indx );
00808     <font class="comment">//outputTextEdit-&gt;append( output_text );</font>
00809     progress_on = TRUE;
00810 }
00811 
00812 
00813 <font class="keywordtype">void</font> kmencoderdlgForm::manageEnableControls()<font class="keyword"></font>
00814 <font class="keyword"></font>{
00815     startPushButton-&gt;setEnabled( TRUE );
00816     previewPushButton-&gt;setEnabled( TRUE );
00817     optionsTabWidget-&gt;setEnabled( TRUE );
00818 }
00819 
00820 
00821 <font class="keywordtype">void</font> kmencoderdlgForm::getFileGroupStuff()<font class="keyword"></font>
00822 <font class="keyword"></font>{
00823     fileinfo.setFileName( fileKURLRequester-&gt;url() );
00824 }
00825 
00826 
00827 <font class="keywordtype">void</font> kmencoderdlgForm::getURLGroupStuff()<font class="keyword"></font>
00828 <font class="keyword"></font>{
00829     urlinfo.setURLName( urlKURLRequester-&gt;url() );
00830 }
00831 
00832 
00833 <font class="keywordtype">void</font> kmencoderdlgForm::new_proc()<font class="keyword"></font>
00834 <font class="keyword"></font>{
00835     stop();
00836     proc = <font class="keyword">new</font> QProcess( <font class="keyword">this</font> );
00837     proc_not_loaded = FALSE;
00838     proc-&gt;setCommunication( 0x02 | 0x04 | 0x08 );
00839 }
00840 
00841 
00842 <font class="keywordtype">void</font> kmencoderdlgForm::setgroups()<font class="keyword"></font>
00843 <font class="keyword"></font>{
00844     setdvdgroup( FALSE );
00845     setendpositiongroup( FALSE );
00846     setfilegroup( FALSE );
00847     setplaylistgroup( FALSE );
00848     seturlgroup( FALSE );
00849     setvcdgroup( FALSE );
00850     settvgroup( FALSE );
00851  
00852     <font class="keywordflow">switch</font>( kmenselected.getSource() ) {
00853     <font class="keywordflow">case</font> srcFILE: {
00854         setfilegroup( TRUE );
00855         setendpositiongroup( TRUE );    
00856         <font class="keywordflow">break</font>;
00857     }
00858     <font class="keywordflow">case</font> srcPLAYLIST: {
00859         setplaylistgroup( TRUE );
00860         <font class="keywordflow">break</font>;
00861     }
00862     <font class="keywordflow">case</font> srcURL: {
00863         seturlgroup( TRUE );
00864         setendpositiongroup( TRUE );
00865         <font class="keywordflow">break</font>;
00866     }
00867     <font class="keywordflow">case</font> srcTV: {
00868         settvgroup( TRUE );
00869         <font class="keywordflow">break</font>;
00870     }
00871     <font class="keywordflow">case</font> srcVCD: {
00872         setvcdgroup( TRUE );
00873         setendpositiongroup( TRUE );
00874         <font class="keywordflow">break</font>;
00875     }
00876     <font class="keywordflow">case</font> srcDVD: {
00877         setdvdgroup( TRUE );
00878         setendpositiongroup( TRUE );
00879         <font class="keywordflow">break</font>;
00880     }
00881     <font class="keywordflow">default</font>: <font class="keywordflow">break</font>;
00882          }
00883 }
00884 
00885 
00886 <font class="keywordtype">void</font> kmencoderdlgForm::vcd_scan()<font class="keyword"></font>
00887 <font class="keyword"></font>{
00888    new_proc();
00889     
00890     QString home_env = getenv( <font class="stringliteral">"HOME"</font> );
00891     home_env = home_env + <font class="stringliteral">"/.kmencoder"</font>;
00892     
00893     <font class="keywordflow">if</font>( access( home_env, R_OK | W_OK | X_OK | F_OK ) != 0 ){
00894     <font class="keywordflow">if</font>( mkdir( home_env,  S_IRWXU ) != 0 ) {
00895         QMessageBox::critical( 0, <font class="stringliteral">"Error"</font>, <font class="stringliteral">"Error with config directory!"</font> );
00896         <font class="keywordflow">return</font>;
00897     }
00898     }
00899     home_env = home_env + <font class="stringliteral">"/tmp"</font>;
00900     <font class="keywordflow">if</font>( access( home_env, R_OK | W_OK | X_OK | F_OK ) != 0 ) {
00901     <font class="keywordflow">if</font>( mkdir( home_env,  S_IRWXU ) != 0 ) {
00902         QMessageBox::critical( 0, <font class="stringliteral">"Error"</font>, <font class="stringliteral">"Error with tmp directory!"</font> );
00903         <font class="keywordflow">return</font>;
00904     }
00905     }
00906     home_env = home_env + <font class="stringliteral">"/kmencoder_test.avi"</font>;
00907     
00908     proc-&gt;addArgument( <font class="stringliteral">"mencoder"</font> );
00909     proc-&gt;addArgument( <font class="stringliteral">"-cdrom-device"</font> );
00910     proc-&gt;addArgument( vcdinfo.getVCDDevice() );
00911     proc-&gt;addArgument( <font class="stringliteral">"-vcd"</font> );
00912     proc-&gt;addArgument( <font class="stringliteral">"1"</font> ) ;
00913     proc-&gt;addArgument( <font class="stringliteral">"-v"</font> );
00914     proc-&gt;addArgument( <font class="stringliteral">"-o"</font> );
00915     proc-&gt;addArgument( home_env );
00916 
00917     proc-&gt;setCommunication ( 0x04 );
00918 
00919     connect( proc, SIGNAL(readyReadStderr()),
00920          <font class="keyword">this</font>, SLOT(getVCDInfo() ));    
00921 
00922     <font class="comment">//Sart the process.</font>
00923     <font class="keywordflow">if</font> ( !proc-&gt;start() ) {
00924     <font class="comment">// error handling</font>
00925     QMessageBox::critical( 0,
00926                    <font class="stringliteral">"Error"</font>,
00927                    <font class="stringliteral">"Could not scan the VCD!"</font> );
00928     } 
00929 }
00930 
00931 
00932 <font class="keywordtype">void</font> kmencoderdlgForm::getVCDInfo()<font class="keyword"></font>
00933 <font class="keyword"></font>{
00934    <font class="comment">//GET Important Info of the VCD. tracks </font>
00935     QString catched = proc-&gt;readStderr(); 
00936     QString output_text = catched.simplifyWhiteSpace();
00937     QString track = <font class="stringliteral">"track"</font>;
00938    ushort indx = output_text.find( track, 0, TRUE);
00939     catched = output_text.mid( indx + 6, 2 );
00940     indx = catched.toInt();
00941     
00942     <font class="keywordflow">if</font>( catched != NULL ) vcdinfo.setVCDTrack( catched );
00943 
00944     <font class="comment">//set info limits.</font>
00945     vcdtrackSpinBox-&gt;setMaxValue( (vcdinfo.getVCDTrack()).toInt() );
00946     <font class="comment">//vcdinfo.setVCDTrack( vcdtrackSpinBox-&gt;text() );</font>
00947 }
00948 
00949 
00950 <font class="keywordtype">void</font> kmencoderdlgForm::manageTrackChanged()<font class="keyword"></font>
00951 <font class="keyword"></font>{
00952     vcdinfo.setVCDTrack( vcdtrackSpinBox-&gt;text() );
00953 }
00954 
00955 
00956 <font class="keywordtype">void</font> kmencoderdlgForm::manageCdromChanged()<font class="keyword"></font>
00957 <font class="keyword"></font>{
00958     vcdinfo.setVCDDevice( cdromdeviceKURLRequester-&gt;url() );
00959 }
</pre></div><hr><address><small>Generated at Wed Jul 24 08:20:49 2002 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
